{% extends "base.html" %}

{% load contest_menu %}
{% load i18n %}
{% load static from staticfiles %}


{% block header %}{% trans "Submission for" %} {{ submission.problem.name }} ({{ submission.problem.codename }}) {% trans "in" %} {{ submission.contest.name }}{% endblock %}

{% block head %}
<link href="{% static "css/pygments_default.css" %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
<dl class="dl-horizontal">
  <dt>{% trans "Submited" %}:</dt>
  <dd>{{ submission.timestamp|timesince }} {% trans "ago" %} ({{ submission.timestamp }})</dd>
  <dt>{% trans "Score" %}:</dt>
  <dd><span data-ajax="submission" data-id="{{ submission.id }}">
    {% if submission.status != submission.JUDGED_STATUS %}
    {{ submission.get_status_display }}...
    {% else %}
    {{ submission.score }}
    {% endif %}</span></dd>

  {% if submission.compilelog %}
    <dt>{% trans "Compilation log" %}:</dt>
    <dd><pre>{{ submission.compilelog }}</pre></dd>
  {% endif %}
    <dt>{% trans "Source" %} {% if submission.contest.is_printing_available %} (<a href="{% url 'printSubmission' submission.pk %}">{% trans "Print" %}</a>){% endif %}:</dt>
    <dd><div class="codehilite">{{ submission.highlighted_source|safe }}</div></dd>
  {% if submission.results.all %}
  <dt>{% trans "Results" %}</dt>
    <table class="table table-striped table-hover table-sortable">
      <thead>
        <tr>
          <th>{% trans "Returncode" %}</th>
          <th>{% trans "Time" %}</th>
          <th>{% trans "Mark" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for result in submission.results.all %}
        <tr>
          <td>{{ result.returncode }}</td>
          <td>{{ result.time }}</td>
          <td>{% if result.mark %}<img src="{% static "img/icon-ok.gif"%}">{% else %}<img src="{% static "img/icon-failed.gif"%}">{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </dl>
{% endblock %}

{% block aside %}
{% contest_menu submission.contest request.user %}
{% endblock %}
